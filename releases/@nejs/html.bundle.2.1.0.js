(globalThis.nejs = (globalThis.nejs||{})).html =(()=>{var O=Object.defineProperty;var k=Object.getOwnPropertyDescriptor;var A=Object.getOwnPropertyNames;var $=Object.prototype.hasOwnProperty;var x=(c,e)=>{for(var s in e)O(c,s,{get:e[s],enumerable:!0})},N=(c,e,s,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of A(e))!$.call(c,t)&&t!==s&&O(c,t,{get:()=>e[t],enumerable:!(n=k(e,t))||n.enumerable});return c};var P=c=>N(O({},"__esModule",{value:!0}),c);var D={};x(D,{HTML:()=>m,commands:()=>l});var b=c=>c&&typeof c=="object",w=c=>Array.isArray(c),S=c=>typeof c=="string",M=typeof process<"u"&&process.env.NEJS_HTML_PREFIX,g=M||"@nejs.html",l={parse:Symbol.for(`${g}.init.parser`),parseOrdered:Symbol.for(`${g}.init.ordered.params`),parseNamed:Symbol.for(`${g}.init.named.params`),parseShadow:Symbol.for(`${g}.init.shadow.params`),createStorage:Symbol.for(`${g}.global.storage.key`),register:Symbol.for(`${g}.factory.element`),define:Symbol.for(`${g}.define.webcomponent`),additionalFunctions:Symbol.for(`${g}.result.prototype`),prefix:g},m=class c{static create(){let e=c[l.parse](...arguments),s=e?.useDocument??top.window.document,n=new CSSStyleSheet,t=s.querySelector("style#htmljs"),{tagName:i,webComponentName:o}=e,a=s.createElement(i,o);for(let[r,d]of e.attributes)if(b(r)){let u,{name:f,namespaceURI:p,qualifiedName:j}=r;namespaceURI||qualifiedName?(u=s.createAttributeNS(p,j),u.value=d,a.setAttributeNodeNS(u)):(S(f)||(f=!f&&String(f)||Object.valueOf.call(f).toString()||String(f)),u=s.createAttribute(f),u.value=d,a.setAttributeNode(u))}else{let u=typeof r=="symbol"&&r||String(r);a.setAttribute(u,d)}for(let[r,d]of Object.entries(e.style))a.style[r]=d;S(e.content)?a.append(s.createTextNode(e.content)):w(e.content)&&a.append(...e.content.map(r=>s.createTextNode(String(r))));for(let r of e.children)a.append(r);if(b(e.shadow)){let r=a.attachShadow(e.shadow.options);e.shadow.children&&e.shadow.children.length&&r.append(...e.shadow.children)}return b(e?.dataset)&&Object.assign(a.dataset,e.dataset),c[l.additionalFunctions]({element:a,reusableStyleSheet:n,reusableStyleElement:t}),Object.defineProperty(a,"identifier",{enumerable:!1,configurable:!1,writable:!0,value:`#${Math.random().toString(36).slice(2)}`}),a}static[l.parse](...e){let s=this[l.parseOrdered].bind(c),n=this[l.parseNamed].bind(c);if(e.length===0)throw new SyntaxError("HTML.create must have parameters!");if(e.length===1){let t=String(e[0]);return{tagName:t,...s(t)}}else{let t=e[0],i=e.slice(1),o=i?.[0];if(o&&typeof o=="object"){if(Array.isArray(o)){let a={tagName:t,...s(t,...i)};return a.children.length===0&&(a.children=a.content,a.content=void 0),a}return{tagName:t,...n(t,o)}}return{tagName:t,...s(t,...i)}}}static[l.parseOrdered](e,s,n,t,i,o,a,r){let d=c[l.parseShadow](e,r);return i&&(i={is:i}),b(t)&&!(t instanceof Map)&&(t=new Map(w(t)?t:Object.entries(t))),{content:s,style:n??{},attributes:t??new Map,webComponentName:i??void 0,useDocument:o??document,children:a??[],shadow:d}}static[l.parseNamed](e,s){let{content:n,style:t,attributes:i,webComponentName:o,useDocument:a,children:r,shadow:d,class:u,classes:f,dataset:p}=s,j=Object.keys({content:n,style:t,attributes:i,webComponentName:o,useDocument:a,children:r,shadow:d,class:u,classes:f,dataset:p}),h=this[l.parseOrdered](e,n,t,i,o,a,r,d);if(S(u)&&h.attributes.set("class",u),w(f)){let y=[h.attributes.get("class")||"",f.filter(v=>S(v)).join(" ")].join(" ").trim();y?h.attributes.set("class",y):h.attributes.has("class")&&!h.attributes.get("class")&&h.delete("class")}b(p)&&!w(p)&&(h.dataset=p);let T=Object.keys(s).filter(y=>!j.some(v=>v===y));for(let y of T)h.attributes.set(y,s[y]);return h}static[l.parseShadow](e,s){if(!s)return;let n=b(s)&&s,t={mode:"open",clonable:!0,slotAssignment:"named"},i=["article","aside","blockquote","body","div","footer","h1","h2","h3","h4","h5","h6","header","main","nav","p","section","span"];if(n&&!n?.tryAnyhow&&!(e.includes("-")||i.includes(e))&&(n=void 0,console.warn([`Elements with a name of "${e}" cannot `,`have an attached shadow DOM. Please see MDN documents.
`,`Supported elements are any with a dash in their name
`,`or any of these:
`,`  ${i.join(",")}
`].join(""))),n){let o=n?.options??{},a=w(n?.children)&&n.children||void 0;w(n)?n={children:n}:n.children=a??[],n.options={...t,...o}}return n}static[l.additionalFunctions]({element:e,reusableStyleSheet:s,reusableStyleElement:n,descriptorBase:t={enumerable:!1,configurable:!0}}){Object.defineProperty(e,"cssVar",{...t,value:{get(i,o){let a=`--${i}`,r=o||e?.shadowRoot||doc;if(!r||!a.startsWith("--"))throw new Error(["Invalid arguments: root and valid CSS variable name","are required."].join(" "));let d=r?.host??document.documentElement;return getComputedStyle(d).getPropertyValue(a).trim()||null},set(i,o,a){let r=a||e?.shadowRoot||doc,d=`--${i}`,f=`${e.shadowRoot?":host":":root"} { ${d}: ${o}; }`;s.replaceSync(f),r?.adoptedStyleSheets?r.adoptedStyleSheets=[s]:n?n.textContent=[...s].map(p=>p.cssText).join(" "):(n=c.style({id:"html_reusable_style_sheet",content:f}),document.head.appendChild(n))}}}),Object.defineProperty(e,"addTo",{...t,value:function(o,a=top.window.document){let r=a.querySelector(o);return r?.append&&typeof r.append=="function"?(r.append(this),!0):!1}}),Object.defineProperty(e,"addToBody",{...t,value:function(o=top.window.document){return o?.body?.append(this),o?.body?.contains(this)}}),Object.defineProperty(e,"addToHead",{...t,value:function(o=top.window.document){return o?.head?.append(this),o?.head?.contains(this)}})}static[l.createStorage](e,s=null,n=!0){let t=Reflect.has(globalThis,l.createStorage),[i,o]=[t,t&&globalThis[l.createStorage]||new Map];i||(globalThis[l.createStorage]=o);let a=n&&new Map||void 0,[r,d]=[o.has(e),e&&(o.get(e)??a)],u=n&&new Map||void 0,[f,p]=[d?.has(s),s&&(d?.get(s)??u)];return!r&&d&&o.set(e,d),!f&&p&&d?.set(s,p),p||d||o}static[l.register](e,s,n,t,...i){let o=c[l.createStorage](l.register,e);o.set("factory",s),o.set("config",n),o.set("thisArg",t),o.set("args",i)}},R=Object.create(Function.prototype),q=new Proxy(R,{get(c,e,s){let n=m[l.createStorage](l.register,e,!1);if(n){let t=n.get("factory"),i=n.get("config"),o=n.get("thisArg"),a=n.get("args")??[];if(typeof t=="function"&&typeof i=="object")return o&&!t.prototype&&t.toString().includes("=>")&&console.warn([`HTML[${e}] is likely a big arrow function and`,"it was registered with a `thisArg` value. This","will not work as expected. You have been warned!"].join(" ")),(...r)=>t.call(o,i,...r)}return typeof e=="string"&&e!=="create"?m.create.bind(m,e):Reflect.get(c,e,s)}});Object.setPrototypeOf(m,q);return P(D);})();
//# sourceMappingURL=html.bundle.2.1.0.js.map
