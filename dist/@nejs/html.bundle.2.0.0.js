var HTML=(()=>{var O=Object.defineProperty;var $=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var N=Object.prototype.hasOwnProperty;var A=(r,e)=>{for(var s in e)O(r,s,{get:e[s],enumerable:!0})},T=(r,e,s,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of x(e))!N.call(r,t)&&t!==s&&O(r,t,{get:()=>e[t],enumerable:!(n=$(e,t))||n.enumerable});return r};var E=r=>T(O({},"__esModule",{value:!0}),r);var R={};A(R,{HTML:()=>g,commands:()=>d});var b=r=>r&&typeof r=="object",S=r=>Array.isArray(r),j=r=>typeof r=="string",m="@nejs.html",d={parse:Symbol.for(`${m}.init.parser`),parseOrdered:Symbol.for(`${m}.init.ordered.params`),parseNamed:Symbol.for(`${m}.init.named.params`),parseShadow:Symbol.for(`${m}.init.shadow.params`),createStorage:Symbol.for(`${m}.global.storage.key`),register:Symbol.for(`${m}.factory.element`),define:Symbol.for(`${m}.define.webcomponent`),prefix:m},g=class r{static create(){let e=r[d.parse](...arguments),s=e?.useDocument??document,n=new CSSStyleSheet,t=s.querySelector("style#htmljs"),{tagName:i,webComponentName:c}=e,o=s.createElement(i,c);for(let[a,f]of e.attributes)if(b(a)){let l,{name:h,namespaceURI:u,qualifiedName:w}=a;namespaceURI||qualifiedName?(l=s.createAttributeNS(u,w),l.value=f,o.setAttributeNodeNS(l)):(j(h)||(h=!h&&String(h)||Object.valueOf.call(h).toString()||String(h)),l=s.createAttribute(h),l.value=f,o.setAttributeNode(l))}else{let l=typeof a=="symbol"&&a||String(a);o.setAttribute(l,f)}for(let[a,f]of Object.entries(e.style))o.style[a]=f;j(e.content)?o.append(s.createTextNode(e.content)):S(e.content)&&o.append(...e.content.map(a=>s.createTextNode(String(a))));for(let a of e.children)o.append(a);if(b(e.shadow)){let a=o.attachShadow(e.shadow.options);e.shadow.children&&e.shadow.children.length&&a.append(...e.shadow.children)}return b(e?.dataset)&&Object.assign(o.dataset,e.dataset),Object.defineProperties(o,{identifier:{enumerable:!1,configurable:!1,writable:!0,value:`#${Math.random().toString(36).slice(2)}`},cssVar:{enumerable:!1,value:{get(a,f){let l=`--${a}`,h=f||o?.shadowRoot||s;if(!h||!l.startsWith("--"))throw new Error(["Invalid arguments: root and valid CSS variable name","are required."].join(" "));let u=h?.host??document.documentElement;return getComputedStyle(u).getPropertyValue(l).trim()||null},set(a,f,l){let h=l||o?.shadowRoot||s,u=`--${a}`,p=`${o.shadowRoot?":host":":root"} { ${u}: ${f}; }`;n.replaceSync(p),h?.adoptedStyleSheets?h.adoptedStyleSheets=[n]:t?t.textContent=[...n].map(v=>v.cssText).join(" "):(t=r.style({id:"html_reusable_style_sheet",content:p}),document.head.appendChild(t))}}}}),o}static[d.parse](...e){let s=this[d.parseOrdered].bind(r),n=this[d.parseNamed].bind(r);if(e.length===0)throw new SyntaxError("HTML.create must have parameters!");if(e.length===1){let t=String(e[0]);return{tagName:t,...s(t)}}else{let t=e[0],i=e.slice(1),c=i?.[0];if(c&&typeof c=="object"){if(Array.isArray(c)){let o={tagName:t,...s(t,...i)};return o.children.length===0&&(o.children=o.content,o.content=void 0),o}return{tagName:t,...n(t,c)}}return{tagName:t,...s(t,...i)}}}static[d.parseOrdered](e,s,n,t,i,c,o,a){let f=r[d.parseShadow](e,a);return i&&(i={is:i}),b(t)&&!(t instanceof Map)&&(t=new Map(S(t)?t:Object.entries(t))),{content:s,style:n??{},attributes:t??new Map,webComponentName:i??void 0,useDocument:c??document,children:o??[],shadow:f}}static[d.parseNamed](e,s){let{content:n,style:t,attributes:i,webComponentName:c,useDocument:o,children:a,shadow:f,class:l,classes:h,dataset:u}=s,w=Object.keys({content:n,style:t,attributes:i,webComponentName:c,useDocument:o,children:a,shadow:f,class:l,classes:h,dataset:u}),p=this[d.parseOrdered](e,n,t,i,c,o,a,f);if(j(l)&&p.attributes.set("class",l),S(h)){let y=[p.attributes.get("class")||"",h.filter(k=>j(k)).join(" ")].join(" ").trim();y?p.attributes.set("class",y):p.attributes.has("class")&&!p.attributes.get("class")&&p.delete("class")}b(u)&&!S(u)&&(p.dataset=u);let v=Object.keys(s).filter(y=>!w.some(k=>k===y));for(let y of v)p.attributes.set(y,s[y]);return p}static[d.parseShadow](e,s){if(!s)return;let n=b(s)&&s,t={mode:"open",clonable:!0,slotAssignment:"named"},i=["article","aside","blockquote","body","div","footer","h1","h2","h3","h4","h5","h6","header","main","nav","p","section","span"];if(n&&!n?.tryAnyhow&&!(e.includes("-")||i.includes(e))&&(n=void 0,console.warn([`Elements with a name of "${e}" cannot `,`have an attached shadow DOM. Please see MDN documents.
`,`Supported elements are any with a dash in their name
`,`or any of these:
`,`  ${i.join(",")}
`].join(""))),n){let c=n?.options??{},o=S(n?.children)&&n.children||void 0;S(n)?n={children:n}:n.children=o??[],n.options={...t,...c}}return n}static[d.createStorage](e,s,n=!0){let t=Reflect.has(globalThis,d.createStorage),[i,c]=[t,t&&globalThis[d.createStorage]||new Map];i||(globalThis[d.createStorage]=c);let o=n&&new Map||void 0,[a,f]=[c.has(e),e&&(c.get(e)??o)],l=n&&new Map||void 0,[h,u]=[c.has(s),s&&(c.get(s)??l)];return!a&&f&&c.set(e,f),!h&&u&&c.set(s,u),u||f||c}static[d.register](e,s,n){let t=r[d.createStorage](d.register,e);t.set("factory",s),t.set("config",n)}},M=Object.create(Function.prototype),D=new Proxy(M,{get(r,e,s){let n=g[d.createStorage](d.register,e,!1);if(n){let t=n.get("factory"),i=n.get("config");if(typeof t=="function"&&typeof i=="object")return()=>t(i)}return typeof e=="string"&&e!=="create"?g.create.bind(g,e):Reflect.get(r,e,s)}});Object.setPrototypeOf(g,D);return E(R);})();
//# sourceMappingURL=html.bundle.2.0.0.js.map
