(globalThis.nejs = (globalThis.nejs||{})).html =(()=>{var A=Object.defineProperty;var $=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var N=Object.prototype.hasOwnProperty;var O=(i,e)=>{for(var n in e)A(i,n,{get:e[n],enumerable:!0})},T=(i,e,n,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of x(e))!N.call(i,t)&&t!==n&&A(i,t,{get:()=>e[t],enumerable:!(s=$(e,t))||s.enumerable});return i};var E=i=>T(A({},"__esModule",{value:!0}),i);var P={};O(P,{HTML:()=>y,commands:()=>h});var b=i=>i&&typeof i=="object",S=i=>Array.isArray(i),j=i=>typeof i=="string",M=typeof process<"u"&&process.env.NEJS_HTML_PREFIX,m=M||"@nejs.html",h={parse:Symbol.for(`${m}.init.parser`),parseOrdered:Symbol.for(`${m}.init.ordered.params`),parseNamed:Symbol.for(`${m}.init.named.params`),parseShadow:Symbol.for(`${m}.init.shadow.params`),createStorage:Symbol.for(`${m}.global.storage.key`),register:Symbol.for(`${m}.factory.element`),define:Symbol.for(`${m}.define.webcomponent`),additionalFunctions:Symbol.for(`${m}.result.prototype`),prefix:m},y=class i{static create(){let e=i[h.parse](...arguments),n=e?.useDocument??top.window.document,s=new CSSStyleSheet,t=n.querySelector("style#htmljs"),{tagName:c,webComponentName:o}=e,a=n.createElement(c,o);for(let[r,d]of e.attributes)if(b(r)){let l,{name:f,namespaceURI:u,qualifiedName:w}=r;namespaceURI||qualifiedName?(l=n.createAttributeNS(u,w),l.value=d,a.setAttributeNodeNS(l)):(j(f)||(f=!f&&String(f)||Object.valueOf.call(f).toString()||String(f)),l=n.createAttribute(f),l.value=d,a.setAttributeNode(l))}else{let l=typeof r=="symbol"&&r||String(r);a.setAttribute(l,d)}for(let[r,d]of Object.entries(e.style))a.style[r]=d;j(e.content)?a.append(n.createTextNode(e.content)):S(e.content)&&a.append(...e.content.map(r=>n.createTextNode(String(r))));for(let r of e.children)a.append(r);if(b(e.shadow)){let r=a.attachShadow(e.shadow.options);e.shadow.children&&e.shadow.children.length&&r.append(...e.shadow.children)}return b(e?.dataset)&&Object.assign(a.dataset,e.dataset),Object.defineProperties(a,{identifier:{enumerable:!1,configurable:!1,writable:!0,value:`#${Math.random().toString(36).slice(2)}`},cssVar:{enumerable:!1,value:{get(r,d){let l=`--${r}`,f=d||a?.shadowRoot||n;if(!f||!l.startsWith("--"))throw new Error(["Invalid arguments: root and valid CSS variable name","are required."].join(" "));let u=f?.host??document.documentElement;return getComputedStyle(u).getPropertyValue(l).trim()||null},set(r,d,l){let f=l||a?.shadowRoot||n,u=`--${r}`,p=`${a.shadowRoot?":host":":root"} { ${u}: ${d}; }`;s.replaceSync(p),f?.adoptedStyleSheets?f.adoptedStyleSheets=[s]:t?t.textContent=[...s].map(v=>v.cssText).join(" "):(t=i.style({id:"html_reusable_style_sheet",content:p}),document.head.appendChild(t))}}}}),a}static[h.parse](...e){let n=this[h.parseOrdered].bind(i),s=this[h.parseNamed].bind(i);if(e.length===0)throw new SyntaxError("HTML.create must have parameters!");if(e.length===1){let t=String(e[0]);return{tagName:t,...n(t)}}else{let t=e[0],c=e.slice(1),o=c?.[0];if(o&&typeof o=="object"){if(Array.isArray(o)){let a={tagName:t,...n(t,...c)};return a.children.length===0&&(a.children=a.content,a.content=void 0),a}return{tagName:t,...s(t,o)}}return{tagName:t,...n(t,...c)}}}static[h.parseOrdered](e,n,s,t,c,o,a,r){let d=i[h.parseShadow](e,r);return c&&(c={is:c}),b(t)&&!(t instanceof Map)&&(t=new Map(S(t)?t:Object.entries(t))),{content:n,style:s??{},attributes:t??new Map,webComponentName:c??void 0,useDocument:o??document,children:a??[],shadow:d}}static[h.parseNamed](e,n){let{content:s,style:t,attributes:c,webComponentName:o,useDocument:a,children:r,shadow:d,class:l,classes:f,dataset:u}=n,w=Object.keys({content:s,style:t,attributes:c,webComponentName:o,useDocument:a,children:r,shadow:d,class:l,classes:f,dataset:u}),p=this[h.parseOrdered](e,s,t,c,o,a,r,d);if(j(l)&&p.attributes.set("class",l),S(f)){let g=[p.attributes.get("class")||"",f.filter(k=>j(k)).join(" ")].join(" ").trim();g?p.attributes.set("class",g):p.attributes.has("class")&&!p.attributes.get("class")&&p.delete("class")}b(u)&&!S(u)&&(p.dataset=u);let v=Object.keys(n).filter(g=>!w.some(k=>k===g));for(let g of v)p.attributes.set(g,n[g]);return p}static[h.parseShadow](e,n){if(!n)return;let s=b(n)&&n,t={mode:"open",clonable:!0,slotAssignment:"named"},c=["article","aside","blockquote","body","div","footer","h1","h2","h3","h4","h5","h6","header","main","nav","p","section","span"];if(s&&!s?.tryAnyhow&&!(e.includes("-")||c.includes(e))&&(s=void 0,console.warn([`Elements with a name of "${e}" cannot `,`have an attached shadow DOM. Please see MDN documents.
`,`Supported elements are any with a dash in their name
`,`or any of these:
`,`  ${c.join(",")}
`].join(""))),s){let o=s?.options??{},a=S(s?.children)&&s.children||void 0;S(s)?s={children:s}:s.children=a??[],s.options={...t,...o}}return s}static[h.createStorage](e,n,s=!0){let t=Reflect.has(globalThis,h.createStorage),[c,o]=[t,t&&globalThis[h.createStorage]||new Map];c||(globalThis[h.createStorage]=o);let a=s&&new Map||void 0,[r,d]=[o.has(e),e&&(o.get(e)??a)],l=s&&new Map||void 0,[f,u]=[o.has(n),n&&(o.get(n)??l)];return!r&&d&&o.set(e,d),!f&&u&&o.set(n,u),u||d||o}static[h.register](e,n,s,t,...c){let o=i[h.createStorage](h.register,e);o.set("factory",n),o.set("config",s),o.set("thisArg",t),o.set("args",c)}},R=Object.create(Function.prototype),D=new Proxy(R,{get(i,e,n){let s=y[h.createStorage](h.register,e,!1);if(s){let t=s.get("factory"),c=s.get("config"),o=s.get("thisArg"),a=s.get("args")??[];if(typeof t=="function"&&typeof c=="object")return o&&!t.prototype&&t.toString().includes("=>")&&console.warn([`HTML[${e}] is likely a big arrow function and`,"it was registered with a `thisArg` value. This","will not work as expected. You have been warned!"].join(" ")),(...r)=>t.call(o,c,...r)}return typeof e=="string"&&e!=="create"?y.create.bind(y,e):Reflect.get(i,e,n)}});Object.setPrototypeOf(y,D);return E(P);})();
//# sourceMappingURL=html.bundle.2.0.9.js.map
